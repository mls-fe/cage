'use strict';

var UpdateNotifier = require('update-notifier'),
    Chalk = require('chalk'),
    Yosay = require('yosay'),
    StringLength = require('string-length'),
    pkg = require('../package.json'),
    updateCheckInterval = 1000 * 60 * 60 * 24 * 7,
    notifier = UpdateNotifier({
    pkg: pkg, updateCheckInterval: updateCheckInterval
});

// from https://github.com/yeoman/yo/blob/master/lib/cli.js#L35
exports.check = function () {
    var update = notifier.update,
        message = [];

    if (update) {
        var newVersion = Chalk.green.bold(update.latest),
            curVersion = Chalk.gray(' (current: ' + update.current + ')'),
            command = Chalk.magenta('sudo npm update -g ' + pkg.name);

        message.push('Cage 可以更新了: ' + newVersion + curVersion);
        message.push('运行 ' + command + ' 更新。');
        console.log(Yosay(message.join(' '), { maxLength: StringLength(message[0]) }));
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksY0FBYyxHQUFRLE9BQU8sQ0FBRSxpQkFBaUIsQ0FBRTtJQUNsRCxLQUFLLEdBQWlCLE9BQU8sQ0FBRSxPQUFPLENBQUU7SUFDeEMsS0FBSyxHQUFpQixPQUFPLENBQUUsT0FBTyxDQUFFO0lBQ3hDLFlBQVksR0FBVSxPQUFPLENBQUUsZUFBZSxDQUFFO0lBQ2hELEdBQUcsR0FBbUIsT0FBTyxDQUFFLGlCQUFpQixDQUFFO0lBQ2xELG1CQUFtQixHQUFHLElBQUksR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDO0lBQzdDLFFBQVEsR0FBYyxjQUFjLENBQUU7QUFDbEMsT0FBRyxFQUFILEdBQUcsRUFBRSxtQkFBbUIsRUFBbkIsbUJBQW1CO0NBQzNCLENBQUUsQ0FBQTs7O0FBR1AsT0FBTyxDQUFDLEtBQUssR0FBRyxZQUFNO0FBQ2xCLFFBQUksTUFBTSxHQUFJLFFBQVEsQ0FBQyxNQUFNO1FBQ3pCLE9BQU8sR0FBRyxFQUFFLENBQUE7O0FBRWhCLFFBQUssTUFBTSxFQUFHO0FBQ1YsWUFBSSxVQUFVLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBRTtZQUM5QyxVQUFVLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBRSxhQUFhLEdBQUcsTUFBTSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUU7WUFDL0QsT0FBTyxHQUFNLEtBQUssQ0FBQyxPQUFPLENBQUUscUJBQXFCLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBRSxDQUFBOztBQUVsRSxlQUFPLENBQUMsSUFBSSxrQkFBaUIsVUFBVSxHQUFHLFVBQVUsQ0FBSSxDQUFBO0FBQ3hELGVBQU8sQ0FBQyxJQUFJLFNBQVEsT0FBTyxVQUFRLENBQUE7QUFDbkMsZUFBTyxDQUFDLEdBQUcsQ0FBRSxLQUFLLENBQUUsT0FBTyxDQUFDLElBQUksQ0FBRSxHQUFHLENBQUUsRUFBRSxFQUFFLFNBQVMsRUFBRSxZQUFZLENBQUUsT0FBTyxDQUFFLENBQUMsQ0FBRSxDQUFFLEVBQUUsQ0FBRSxDQUFFLENBQUE7S0FDM0Y7Q0FDSixDQUFBIiwiZmlsZSI6InVwZGF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBVcGRhdGVOb3RpZmllciAgICAgID0gcmVxdWlyZSggJ3VwZGF0ZS1ub3RpZmllcicgKSxcbiAgICBDaGFsayAgICAgICAgICAgICAgID0gcmVxdWlyZSggJ2NoYWxrJyApLFxuICAgIFlvc2F5ICAgICAgICAgICAgICAgPSByZXF1aXJlKCAneW9zYXknICksXG4gICAgU3RyaW5nTGVuZ3RoICAgICAgICA9IHJlcXVpcmUoICdzdHJpbmctbGVuZ3RoJyApLFxuICAgIHBrZyAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCAnLi4vcGFja2FnZS5qc29uJyApLFxuICAgIHVwZGF0ZUNoZWNrSW50ZXJ2YWwgPSAxMDAwICogNjAgKiA2MCAqIDI0ICogNyxcbiAgICBub3RpZmllciAgICAgICAgICAgID0gVXBkYXRlTm90aWZpZXIoIHtcbiAgICAgICAgcGtnLCB1cGRhdGVDaGVja0ludGVydmFsXG4gICAgfSApXG5cbi8vIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3llb21hbi95by9ibG9iL21hc3Rlci9saWIvY2xpLmpzI0wzNVxuZXhwb3J0cy5jaGVjayA9ICgpID0+IHtcbiAgICBsZXQgdXBkYXRlICA9IG5vdGlmaWVyLnVwZGF0ZSxcbiAgICAgICAgbWVzc2FnZSA9IFtdXG5cbiAgICBpZiAoIHVwZGF0ZSApIHtcbiAgICAgICAgbGV0IG5ld1ZlcnNpb24gPSBDaGFsay5ncmVlbi5ib2xkKCB1cGRhdGUubGF0ZXN0ICksXG4gICAgICAgICAgICBjdXJWZXJzaW9uID0gQ2hhbGsuZ3JheSggJyAoY3VycmVudDogJyArIHVwZGF0ZS5jdXJyZW50ICsgJyknICksXG4gICAgICAgICAgICBjb21tYW5kICAgID0gQ2hhbGsubWFnZW50YSggJ3N1ZG8gbnBtIHVwZGF0ZSAtZyAnICsgcGtnLm5hbWUgKVxuXG4gICAgICAgIG1lc3NhZ2UucHVzaCggYENhZ2Ug5Y+v5Lul5pu05paw5LqGOiAke25ld1ZlcnNpb259JHtjdXJWZXJzaW9ufWAgKVxuICAgICAgICBtZXNzYWdlLnB1c2goIGDov5DooYwgJHtjb21tYW5kfSDmm7TmlrDjgIJgIClcbiAgICAgICAgY29uc29sZS5sb2coIFlvc2F5KCBtZXNzYWdlLmpvaW4oICcgJyApLCB7IG1heExlbmd0aDogU3RyaW5nTGVuZ3RoKCBtZXNzYWdlWyAwIF0gKSB9ICkgKVxuICAgIH1cbn1cbiJdfQ==