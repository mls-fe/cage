'use strict';

var UpdateNotifier = require('update-notifier'),
    Chalk = require('chalk'),
    Yosay = require('yosay'),
    StringLength = require('string-length'),
    pkg = require('../package.json'),
    updateCheckInterval = 1000 * 60,
    notifier = UpdateNotifier({
    pkg: pkg, updateCheckInterval: updateCheckInterval
});

// from https://github.com/yeoman/yo/blob/master/lib/cli.js#L35
exports.check = function () {
    var update = notifier.update;

    if (update) {
        var newVersion = Chalk.green.bold(update.latest),
            curVersion = Chalk.gray(' (current: ' + update.current + ')'),
            command = Chalk.magenta('sudo npm install -g ' + pkg.name);

        message.push('Cage 可以更新了: ' + newVersion + curVersion);
        message.push('运行 ' + command + ' to update.');
        console.log(Yosay(message.join(' '), { maxLength: StringLength(message[0]) }));
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksY0FBYyxHQUFRLE9BQU8sQ0FBRSxpQkFBaUIsQ0FBRTtJQUNsRCxLQUFLLEdBQWlCLE9BQU8sQ0FBRSxPQUFPLENBQUU7SUFDeEMsS0FBSyxHQUFpQixPQUFPLENBQUUsT0FBTyxDQUFFO0lBQ3hDLFlBQVksR0FBVSxPQUFPLENBQUUsZUFBZSxDQUFFO0lBQ2hELEdBQUcsR0FBbUIsT0FBTyxDQUFFLGlCQUFpQixDQUFFO0lBQ2xELG1CQUFtQixHQUFHLElBQUksR0FBRyxFQUFFO0lBQy9CLFFBQVEsR0FBYyxjQUFjLENBQUU7QUFDbEMsT0FBRyxFQUFILEdBQUcsRUFBRSxtQkFBbUIsRUFBbkIsbUJBQW1CO0NBQzNCLENBQUUsQ0FBQTs7O0FBR1AsT0FBTyxDQUFDLEtBQUssR0FBRyxZQUFNO0FBQ2xCLFFBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUE7O0FBRTVCLFFBQUssTUFBTSxFQUFHO0FBQ1YsWUFBSSxVQUFVLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBRTtZQUM5QyxVQUFVLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBRSxhQUFhLEdBQUcsTUFBTSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUU7WUFDL0QsT0FBTyxHQUFNLEtBQUssQ0FBQyxPQUFPLENBQUUsc0JBQXNCLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBRSxDQUFBOztBQUVuRSxlQUFPLENBQUMsSUFBSSxrQkFBaUIsVUFBVSxHQUFHLFVBQVUsQ0FBSSxDQUFBO0FBQ3hELGVBQU8sQ0FBQyxJQUFJLFNBQVEsT0FBTyxpQkFBZSxDQUFBO0FBQzFDLGVBQU8sQ0FBQyxHQUFHLENBQUUsS0FBSyxDQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUUsR0FBRyxDQUFFLEVBQUUsRUFBRSxTQUFTLEVBQUUsWUFBWSxDQUFFLE9BQU8sQ0FBRSxDQUFDLENBQUUsQ0FBRSxFQUFFLENBQUUsQ0FBRSxDQUFBO0tBQzNGO0NBQ0osQ0FBQSIsImZpbGUiOiJ1cGRhdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgVXBkYXRlTm90aWZpZXIgICAgICA9IHJlcXVpcmUoICd1cGRhdGUtbm90aWZpZXInICksXG4gICAgQ2hhbGsgICAgICAgICAgICAgICA9IHJlcXVpcmUoICdjaGFsaycgKSxcbiAgICBZb3NheSAgICAgICAgICAgICAgID0gcmVxdWlyZSggJ3lvc2F5JyApLFxuICAgIFN0cmluZ0xlbmd0aCAgICAgICAgPSByZXF1aXJlKCAnc3RyaW5nLWxlbmd0aCcgKSxcbiAgICBwa2cgICAgICAgICAgICAgICAgID0gcmVxdWlyZSggJy4uL3BhY2thZ2UuanNvbicgKSxcbiAgICB1cGRhdGVDaGVja0ludGVydmFsID0gMTAwMCAqIDYwLFxuICAgIG5vdGlmaWVyICAgICAgICAgICAgPSBVcGRhdGVOb3RpZmllcigge1xuICAgICAgICBwa2csIHVwZGF0ZUNoZWNrSW50ZXJ2YWxcbiAgICB9IClcblxuLy8gZnJvbSBodHRwczovL2dpdGh1Yi5jb20veWVvbWFuL3lvL2Jsb2IvbWFzdGVyL2xpYi9jbGkuanMjTDM1XG5leHBvcnRzLmNoZWNrID0gKCkgPT4ge1xuICAgIGxldCB1cGRhdGUgPSBub3RpZmllci51cGRhdGVcblxuICAgIGlmICggdXBkYXRlICkge1xuICAgICAgICBsZXQgbmV3VmVyc2lvbiA9IENoYWxrLmdyZWVuLmJvbGQoIHVwZGF0ZS5sYXRlc3QgKSxcbiAgICAgICAgICAgIGN1clZlcnNpb24gPSBDaGFsay5ncmF5KCAnIChjdXJyZW50OiAnICsgdXBkYXRlLmN1cnJlbnQgKyAnKScgKSxcbiAgICAgICAgICAgIGNvbW1hbmQgICAgPSBDaGFsay5tYWdlbnRhKCAnc3VkbyBucG0gaW5zdGFsbCAtZyAnICsgcGtnLm5hbWUgKVxuXG4gICAgICAgIG1lc3NhZ2UucHVzaCggYENhZ2Ug5Y+v5Lul5pu05paw5LqGOiAke25ld1ZlcnNpb259JHtjdXJWZXJzaW9ufWAgKVxuICAgICAgICBtZXNzYWdlLnB1c2goIGDov5DooYwgJHtjb21tYW5kfSB0byB1cGRhdGUuYCApXG4gICAgICAgIGNvbnNvbGUubG9nKCBZb3NheSggbWVzc2FnZS5qb2luKCAnICcgKSwgeyBtYXhMZW5ndGg6IFN0cmluZ0xlbmd0aCggbWVzc2FnZVsgMCBdICkgfSApIClcbiAgICB9XG59XG4iXX0=